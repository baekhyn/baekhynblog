---
title: 'typescript webpack ì‚¬ìš©í•˜ê¸°'
subtitle: 'webpack'
date: '2022-07-31'
category:
    - 'Typescript'
---

# webpack ì‚¬ìš© í•˜ê¸°

ES6ì˜ import êµ¬ë¬¸ ì‚¬ìš© ì‹œ http ìš”ì²­ì´ ë§ì•„ì§€ëŠ” ë¬¸ì œê°€ ìƒê¸¸ ìˆ˜ ìˆë‹¤.
ì›¹íŒ©ì€ í•´ë‹¹ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ” ì¢‹ì€ ë„êµ¬ì´ë‹¤.

ì›¹íŒ©ì€ ì½”ë“œë¥¼ ë¬¶ì–´ì„œ http ìš”ì²­ì„ ì¤„ì—¬ì£¼ê³  ì½”ë“œ ìµœì í™” ë° ë¹Œë“œ ì„¤ì •ì„ ê°€ëŠ¥í•˜ê²Œ í•´ì¤€ë‹¤.

## íŒ¨í‚¤ì§€ ì„¤ì¹˜

ì‘ë™í•˜ê³  ìˆëŠ” ê°œë°œ ì„œë²„ê°€ ìˆë‹¤ë©´ `ctrl+c`ë¡œ ì¢…ë£Œí•œë‹¤.

npm **ëª…ë ¹ì–´**ë¡œ ì„¤ì¹˜

```http
npm install --save-dev webpack webpack-cli webpack-dev-server typescript ts-loader
```

-   `--save-dev`: **package.json** ì˜ **devDependencies** í•­ëª©ì— íŒ¨í‚¤ì§€ ì €ì¥

ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ë“¤

```json
  "devDependencies": {
    "lite-server": "^2.5.4",
    "ts-loader": "^9.3.1",
    "typescript": "^4.7.4",
    "webpack": "^5.74.0",
    "webpack-cli": "^4.10.0",
    "webpack-dev-server": "^4.9.3"
  }
```

-   `webpack`: ì½”ë“œë¥¼ ë¬¶ê³  ë³€í™˜í•˜ê¸° ìœ„í•œ íŠ¹ì •ê¸°ëŠ¥ì„ í”ŒëŸ¬ê·¸ì¸ í•˜ë„ë¡ ì§€ì›
-   `webpack-cli`: í”„ë¡œì íŠ¸ì—ì„œ ì›¹íŒ© ëª…ë ¹ì–´ ì‚¬ìš©ì„ ê°€ëŠ¥í•˜ê²Œ í•¨
-   `webpack-dev-server`: ê°œë°œ ì„œë²„ ë‚´ ë¹ŒíŠ¸
    ë³€ê²½ì‚¬í•­ ê°ì§€ ì‹œ ì›¹í˜ì´ì§€ë¥¼ ë‹¤ì‹œ ì»´íŒŒì¼ë§í•œë‹¤.
-   `ts-loader`: ì›¹íŒ©ê³¼ í•¨ê»˜ ë™ì‘ ì›¹íŒ©ì—ê²Œ ì½”ë“œë¥¼ ì–´ë–»ê²Œ ë³€í™˜í•  ê²ƒì¸ì§€ ì•Œë ¤ì¤€ë‹¤

## âš™ï¸ webpack.config.js

ğŸ“„ **tsconfig.json**

```json
// "rootDir": "./src"
```

-   **ì›¹íŒ©**ì´ **ë£¨íŠ¸ íŒŒì¼ ìœ„ì¹˜**ë¥¼ **ê²°ì •**í•  ê²ƒì´ê¸° ë•Œë¬¸ì—
    `rootDir`ì„¤ì •ì„ **ì£¼ì„ì²˜ë¦¬** í•œë‹¤.

```js
import Component from './component.js';
import Component from './component';
// âœ…
```

-   **ì´ì¤‘ í™•ì¥ì ê²€ìƒ‰** ë°©ì§€ë¥¼ ìœ„í•´ ëª¨ë“  íŒŒì¼ì˜ **import êµ¬ë¬¸** í™•ì¥ìëª…`.js`ë¥¼ **ì‚­ì œ**

ë£¨íŠ¸ ê²½ë¡œì— `ğŸ“„ webpack.config.js` íŒŒì¼ ìƒì„±

### entry output

ë‹¤ìŒê³¼ ê°™ì´ **ì…ë ¥ & ì¶œë ¥**ì„ ì„¤ì •í•œë‹¤.

```js
const path = require('path');

module.exports = {
    entry: './src/app.ts',
    output: {
        filename: 'bundle.js',
        path: path.resolve(__dirname, 'dist'),
        // ì ˆëŒ€ ê²½ë¡œ
    },
};
```

-   `entry`: **í”„ë¡œì íŠ¸ì˜ ì‹œì‘** ì§€ì 
-   `output`: **ë²ˆë“¤ë§ ì™„ë£Œ** ì‹œ ìƒì„±í•  **íŒŒì¼ì˜ ì´ë¦„(filename)ê³¼** **ì €ì¥ ê²½ë¡œ(path)**
    -   **ë™ì ì¸ íŒŒì¼ëª…** ì§€ì •ë„ ê°€ëŠ¥í•˜ë‹¤
    -   `bundle.[contenthash].js` ëª¨ë“  ë¹Œë“œì— ëŒ€í•œ ê³ ìœ  í•´ì‹œë¥¼ ìë™ ìƒì„±í•¨

> â—ï¸
> **output path** ì„¤ì • ì‹œ ì£¼ì˜í•  ì 
>
> -   ì—ëŸ¬ ë°©ì§€ë¥¼ ìœ„í•´ `tsconfig.json`ì˜ **outDir**ì˜ ê²½ë¡œì™€ ë§ì¶°ì•¼ í•œë‹¤.
> -   ìƒëŒ€ ê²½ë¡œê°€ ì•„ë‹Œ **ì ˆëŒ€ ê²½ë¡œ**ë¥¼ ì…ë ¥í•´ì•¼ í•œë‹¤.

### loaders

ì›¹íŒ©ì€ **js, json** í˜•ì‹ì˜ íŒŒì¼ë“¤ë§Œ ì´í•´í•  ìˆ˜ ìˆë‹¤.

loaderëŠ” ì›¹íŒ©ì´ **js, json ì´ì™¸ì˜ ë‹¤ë¥¸ í˜•ì‹**ì˜ íŒŒì¼ë“¤ì„ ì´í•´í•  ìˆ˜ ìˆê²Œ ë„ì™€ì¤€ë‹¤.

```js
  module: {
    rules: [
      {
        test: /\.ts$/,
        use: 'ts-loader',
        exclude: /node_modules/
      }
    ]
  },
```

-   `test`: **ë³€í™˜ ëŒ€ìƒ** íŒŒì¼
-   `use`: ë³€í™˜ì— ì‚¬ìš©ë˜ëŠ” **loader ì´ë¦„**
    -   **ts-loader**ëŠ” `tsconfig.json`ì„ í†µí•´ íŒŒì¼ì„ ê³ ë ¤í•¨
-   `exclude`: ì›¹íŒ©ì´ **ë°°ì œ**í•  íŒŒì¼

### resolve

```js
  resolve: {
    extensions: ['.ts', '.js'],
  },
```

-   `extensions`: ìë™ìœ¼ë¡œ **resolve**í•  íŠ¹ì • **í™•ì¥ìëª…**

### devtool

**source mapping ìŠ¤íƒ€ì¼**ì„ ì„ íƒí•œë‹¤.

```js
devtool: 'inline-source-map';
```

-   `tsconfig`ì˜ sourceMap ì„¤ì •ì´ **true**ë¡œ ë˜ì–´ìˆì–´ì•¼ í•œë‹¤.

ì´ì™¸ì˜ ë‹¤ì–‘í•œ ì†ŒìŠ¤ ë§¤í•‘ ë°©ì‹ë“¤ **https://webpack.js.org/configuration/devtool/#devtool**

# ì›¹íŒ© ì‹¤í–‰

`package.json`ì— ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±

```json
"scripts": {
    //...
    "build":"webpack"
}
```

outDirì— js íŒŒì¼ì´ ìˆë‹¤ë©´ ê¹”ë”í•˜ê²Œ ì‚­ì œí•˜ê³  **npm run build** ì‹¤í–‰

# webpack-dev-server

```json
"scripts": {
    //...
    "start":"webpack-dev-server"
}
```

**npm run start**
**ë¡œì»¬í˜¸ìŠ¤íŠ¸ 8080**ìœ¼ë¡œ ì„œë²„ê°€ ëŒì•„ê°€ëŠ” ê±¸ ë³¼ ìˆ˜ ìˆë‹¤.

`bundle.js` ì‚­ì œ í›„

```json
publicPath: 'dist'
```

`webpack.config.js`ì— ë‹¤ìŒê³¼ ê°™ì´ ì„¤ì •í•˜ë©´ íŒŒì¼ ë³€í™˜ì‹œ ìë™ ë°˜ì˜

# âš™ï¸ webpack.config.prod.js

í”„ë¡œë•ì…˜ ì‹œ í•„ìš”í•œ ì›¹íŒ© ì„¤ì •

```js
const path = require('path');

module.exports = {
    mode: 'production',
    //mode:'development'
    entry: './src/app.ts',
    output: {
        filename: 'bundle.js',
        path: path.resolve(__dirname, 'dist'),
        // publicPath: 'dist',
    },
    // devtool: 'inline-source-map',
    devtool: 'none',
    module: {
        rules: [
            {
                test: /\.ts$/,
                use: 'ts-loader',
                exclude: /node_modules/,
            },
        ],
    },
    resolve: {
        extensions: ['.ts', '.js'],
    },
};
```

-   publicPathëŠ” **webpack-dev-server**ë¥¼ ìœ„í•´ ì‘ì„±í•œ ê²ƒì´ì˜€ìœ¼ë¯€ë¡œ ì‚­ì œ
-   í”„ë¡œë•ì…˜ì— í•„ìš”í•˜ì§€ ì•Šì€ `sourceMap` ì„¤ì •ì„ 'none'ìœ¼ë¡œ ë³€ê²½í•´ì¤€ë‹¤.

**í•´ë‹¹ íŒŒì¼ ì ìš©í•˜ê¸°**

```json
"scripts":{
    //...
    "build":"webpack"
}
```

## clean-webpack-plugin

ë¹Œë“œ ì‹œ outDirì¸ dist í´ë” ë‚´ì˜ ëª¨ë“  ê²ƒë“¤ì„ ë¹„ì›Œì£¼ëŠ” í”ŒëŸ¬ê·¸ì¸

```json
npm install --save-dev clean-webpack-plugin
```

npm í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜

```js
const CleanPlugin = require('clean-webpack-plugin');

module.exports = {
    //...
    plugins: [new CleanPlugin.CleanWebpackPlugin()],
};
```

ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±
